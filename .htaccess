AddType text/css .css
AddType application/javascript .js
AddType image/png .png

<FilesMatch "\.(css|js|png|jpg|jpeg|gif|ico)$">
  Header set Cache-Control "max-age=31536000, public"
</FilesMatch>

<FilesMatch "\.(html|htm)$">
  Header set Cache-Control "max-age=86400, public"
</FilesMatch>

# Enable gzip compression
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/css application/javascript text/javascript
</IfModule>

DirectoryIndex index.html
Options -Indexes

<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
</IfModule>

<FilesMatch "\.(css|js)$">
  Header set Content-Type "text/css" env=IS_CSS
  Header set Content-Type "application/javascript" env=IS_JS
</FilesMatch>

# Activer le module de réécriture d'URL
RewriteEngine On

# Règle pour rediriger vers index.html pour les URL non-fichiers
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ public/index.html [L]

# Autoriser l'accès aux dossiers
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
    Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
    Header set Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept"
</IfModule>

# Gérer les erreurs
ErrorDocument 404 /public/index.html
