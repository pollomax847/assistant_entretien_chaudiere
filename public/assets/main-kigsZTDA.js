import"./notifications-DM2bvA8y.js";document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".app-container");m(),f(),y(),localStorage.getItem("sidebarHidden")==="true"&&e&&e.classList.add("sidebar-hidden"),r(),loadFavorites()});function m(){r(),c("module-puissance-chauffage"),I()}function f(){document.querySelectorAll(".sidebar-nav a").forEach(n=>{n.addEventListener("click",o=>{o.preventDefault();const a=o.currentTarget.getAttribute("href").substring(1);c(a)})}),document.getElementById("logoutBtn").addEventListener("click",b),document.getElementById("search-modules").addEventListener("input",l);const e=document.getElementById("sidebarToggle"),t=document.querySelector(".app-container");e.addEventListener("click",()=>{t.classList.toggle("sidebar-hidden");const n=t.classList.contains("sidebar-hidden");localStorage.setItem("sidebarHidden",n)})}function r(){const e=document.getElementById("status-indicator");navigator.onLine?(e.classList.add("status-online"),e.classList.remove("status-offline"),e.title="Connecté"):(e.classList.add("status-offline"),e.classList.remove("status-online"),e.title="Hors ligne")}function c(e){const t=document.getElementById("module-container");t.innerHTML="",fetch(`/modules/${e}.html`).then(n=>n.text()).then(n=>{t.innerHTML=n,g(e)}).catch(n=>{console.error("Erreur lors du chargement du module:",n),t.innerHTML='<div class="error">Erreur lors du chargement du module</div>'})}function g(e){switch(e){case"module-puissance-chauffage":p();break;case"module-vase-expansion":v();break}}function p(){const e=document.getElementById("puissance-chauffage-form");e&&e.addEventListener("submit",t=>{t.preventDefault(),h()})}function h(){const e=parseFloat(document.getElementById("surface").value),t=parseFloat(document.getElementById("hauteur").value),n=parseFloat(document.getElementById("temp-int").value),o=parseFloat(document.getElementById("temp-ext").value),a=parseFloat(document.getElementById("coefficient-g").value),s=e*t,i=n-o,d=a*s*i/1e3;u("puissance-result",{volume:s.toFixed(2),deltaT:i.toFixed(1),puissance:d.toFixed(2)})}function v(){const e=document.getElementById("vase-expansion-form");e&&e.addEventListener("submit",t=>{t.preventDefault(),E()})}function E(){const e=parseFloat(document.getElementById("hauteur-batiment").value),t=document.getElementById("radiateur-eloigne").checked,n=e/10+.3,o=Math.round(n*2)/2;u("vase-expansion-result",{pressionTheorique:n.toFixed(2),reglageTours:o.toFixed(1),radiateurEloigne:t?"Oui":"Non"})}function u(e,t){const n=document.getElementById(e);if(!n)return;let o='<div class="result">';for(const[a,s]of Object.entries(t))o+=`<p><strong>${L(a)}:</strong> ${s}</p>`;o+="</div>",n.innerHTML=o}function L(e){return{volume:"Volume (m³)",deltaT:"ΔT (°C)",puissance:"Puissance (kW)",pressionTheorique:"Pression théorique (bar)",reglageTours:"Réglage (tours)",radiateurEloigne:"Radiateur le plus éloigné"}[e]||e}function y(){const e=JSON.parse(localStorage.getItem("userPreferences"))||{};document.getElementById("technician-name").textContent=e.technicianName||"Technicien"}function I(){const e=document.getElementById("search-modules");e&&e.addEventListener("input",l)}function l(e){const t=e.target.value.toLowerCase();document.querySelectorAll(".sidebar-nav a").forEach(o=>{const a=o.textContent.toLowerCase();o.parentElement.style.display=a.includes(t)?"block":"none"})}function b(){localStorage.removeItem("userPreferences"),window.location.href="/auth.html"}
